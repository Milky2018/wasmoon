# Wasmoon Roadmap

WebAssembly Runtime in MoonBit - å¼€å‘è·¯çº¿å›¾

## é¡¹ç›®æ¦‚è¿°

Wasmoon æ˜¯ä¸€ä¸ªç”¨ MoonBit ç¼–å†™çš„ WebAssembly è¿è¡Œæ—¶ï¼Œç›®æ ‡æ˜¯å®ç°ä¸€ä¸ªå®Œæ•´çš„ WASM è§£é‡Šå™¨å’Œ JIT ç¼–è¯‘å™¨ï¼Œæ”¯æŒ WebAssembly è§„èŒƒçš„æ ¸å¿ƒç‰¹æ€§ï¼Œå¹¶æœ€ç»ˆå®ç°ç±»ä¼¼ Cranelift çš„ä»£ç ç”Ÿæˆå™¨ã€‚

## Phase 1: MVP âœ… å·²å®Œæˆ

### 1.1 æ ¸å¿ƒæ•°æ®ç»“æ„ âœ…
- [x] å€¼ç±»å‹å®šä¹‰ (I32, I64, F32, F64, FuncRef, ExternRef)
- [x] æŒ‡ä»¤é›†æšä¸¾ (190+ æŒ‡ä»¤å˜ä½“)
- [x] æ¨¡å—ç»“æ„ (Module, FuncType, Export, Import ç­‰)

### 1.2 äºŒè¿›åˆ¶æ ¼å¼è§£æå™¨ âœ…
- [x] é­”æ•°å’Œç‰ˆæœ¬éªŒè¯
- [x] LEB128 ç¼–ç è§£ç 
- [x] 11 ç§ Section è§£æ
- [x] IEEE 754 æµ®ç‚¹æ•°è§£ç  (f32/f64)

### 1.3 è¿è¡Œæ—¶æ•°æ®ç»“æ„ âœ…
- [x] æ“ä½œæ•°æ ˆ (Stack)
- [x] çº¿æ€§å†…å­˜ (Memory)
- [x] å‡½æ•°å¼•ç”¨è¡¨ (Table)
- [x] å…¨å±€å˜é‡ (GlobalInstance)
- [x] è°ƒç”¨å¸§ (Frame)
- [x] å…¨å±€å­˜å‚¨ (Store)
- [x] æ¨¡å—å®ä¾‹ (ModuleInstance)

### 1.4 åŸºç¡€æ‰§è¡Œå¼•æ“ âœ…
- [x] i32 ç®—æœ¯/æ¯”è¾ƒ/ä½è¿ç®—
- [x] å¸¸é‡æŒ‡ä»¤
- [x] å±€éƒ¨å˜é‡æ“ä½œ
- [x] åŸºæœ¬æ§åˆ¶æµ

---

## Phase 2: æ ¸å¿ƒåŠŸèƒ½æ‰©å±• âœ… å·²å®Œæˆ

### 2.1 å®Œæ•´çš„æ•°å€¼è¿ç®— âœ…
- [x] i64 ç®—æœ¯/æ¯”è¾ƒ/ä½è¿ç®—
- [x] f32/f64 æµ®ç‚¹è¿ç®—
- [x] æ•°å€¼è½¬æ¢æŒ‡ä»¤ (wrap, extend, trunc, convert, reinterpret)
- [x] é¥±å’Œè½¬æ¢æŒ‡ä»¤ (trunc_sat)

### 2.2 å†…å­˜æ“ä½œ âœ…
- [x] å®Œæ•´çš„ load/store æŒ‡ä»¤æ—
- [x] æ‰©å±•çš„ load æŒ‡ä»¤ (load8_s, load8_u, load16_s, load16_u, load32_s, load32_u)
- [x] memory.size å’Œ memory.grow

### 2.3 æ§åˆ¶æµ âœ…
- [x] ç»“æ„åŒ–æ§åˆ¶æµ (block, loop, if-else)
- [x] åˆ†æ”¯æŒ‡ä»¤ (br, br_if, br_table)
- [x] select æŒ‡ä»¤

### 2.4 å‡½æ•°è°ƒç”¨ âœ…
- [x] ç›´æ¥å‡½æ•°è°ƒç”¨ (call)
- [x] é—´æ¥å‡½æ•°è°ƒç”¨ (call_indirect)

---

## Phase 3: å®Œæ•´çš„ WASM 1.0 æ”¯æŒ âœ… å·²å®Œæˆ

### 3.1 å…¨å±€å˜é‡ âœ…
- [x] global.get / global.set
- [x] å…¨å±€å˜é‡åˆå§‹åŒ–è¡¨è¾¾å¼

### 3.2 å¯¼å…¥å¯¼å‡º âœ…
- [x] å‡½æ•°å¯¼å…¥/å¯¼å‡º
- [x] ä¸»æœºå‡½æ•°æ¥å£ (Host Functions)
- [x] å†…å­˜å¯¼å…¥/å¯¼å‡º
- [x] è¡¨å¯¼å…¥/å¯¼å‡º
- [x] å…¨å±€å˜é‡å¯¼å…¥/å¯¼å‡º

### 3.3 è¡¨æ“ä½œ âœ…
- [x] table.get / table.set
- [x] table.size / table.grow
- [x] table.fill / table.copy

### 3.4 æ¨¡å—åˆå§‹åŒ– âœ…
- [x] Start function æ‰§è¡Œ
- [x] æ•°æ®æ®µåˆå§‹åŒ– (data segment)
- [x] å…ƒç´ æ®µåˆå§‹åŒ– (element segment)

### 3.5 æ‰¹é‡å†…å­˜æ“ä½œ âœ…
- [x] memory.init / memory.copy / memory.fill
- [x] data.drop / elem.drop

### 3.6 å¼•ç”¨ç±»å‹ âœ…
- [x] ref.null / ref.is_null / ref.func

### 3.7 å¤šè¿”å›å€¼ âœ…
- [x] å‡½æ•°å¤šè¿”å›å€¼æ”¯æŒ
- [x] block/if å¤šè¿”å›å€¼æ”¯æŒ

---

## Phase 4: æ¨¡å—éªŒè¯ä¸é“¾æ¥ âœ… å·²å®Œæˆ

### 4.1 æ¨¡å—éªŒè¯å™¨ âœ…
- [x] ç±»å‹æ£€æŸ¥
- [x] æ ˆé«˜åº¦éªŒè¯
- [x] æ§åˆ¶æµéªŒè¯
- [x] å†…å­˜é™åˆ¶éªŒè¯
- [x] å¤šå†…å­˜/å¤šè¡¨æ£€æŸ¥ (MVP é™åˆ¶)

### 4.2 å¤šæ¨¡å—æ”¯æŒ âœ…
- [x] æ¨¡å—é“¾æ¥
- [x] ç¬¦å·è§£æ

---

## Phase 5: å·¥å…·ä¸æµ‹è¯• âœ… å·²å®Œæˆ

### 5.1 è§„èŒƒå…¼å®¹æ€§ âœ…
- [x] å®˜æ–¹æµ‹è¯•å¥—ä»¶åŸºç¡€è®¾æ–½ (wasm-testsuite)
- [x] è‡ªåŠ¨åŒ–æµ‹è¯•è¿è¡Œå™¨ (è§£æ JSON æµ‹è¯•è§„èŒƒï¼Œè‡ªåŠ¨æ‰§è¡Œæµ‹è¯•)
  - ç”¨æ³•: `moon run cmd/main -- test testsuite/data/i32.json`
- [x] å®Œæ•´é€šè¿‡å®˜æ–¹æµ‹è¯•å¥—ä»¶ (5955 tests passed, 0 failed)

### 5.2 å·¥å…·é“¾
- [x] WASM åæ±‡ç¼–å™¨
- [x] WAT æ–‡æœ¬æ ¼å¼æ”¯æŒ
  - [x] åŸºæœ¬ WAT è§£æ (flat form)
  - [x] WAT folded form è¯­æ³•æ”¯æŒ (then/else keywords in if expressions)
  - [x] Import å†…è”å‡½æ•°ç­¾å - æ”¯æŒ `(import ... (func (param ...) (result ...)))` è¯­æ³•
  - [x] Data æ®µè§£æ - æ”¯æŒ `(data (i32.const N) "string")` è¯­æ³•
  - [x] WAT é”™è¯¯ä¿¡æ¯åŒ…å«è¡Œåˆ—å· (å¦‚ `at 4:3: invalid instruction`)

### 5.3 å‘½ä»¤è¡Œå·¥å…· (å¯¹é½ wasmtime CLI)

> å‚è€ƒ `wasmtime --help` å®ç°å®Œæ•´çš„å‘½ä»¤è¡Œæ¥å£

#### æ ¸å¿ƒå‘½ä»¤
- [x] `run` - è¿è¡Œ WebAssembly æ¨¡å—
  - [x] ç›´æ¥è¿è¡Œ `.wasm` æ–‡ä»¶
  - [x] `--invoke <FUNCTION>` æŒ‡å®šå…¥å£å‡½æ•°
  - [x] ä¼ é€’å‘½ä»¤è¡Œå‚æ•°ç»™ WASM æ¨¡å— (`--arg`)
  - [x] `--preload <NAME=MODULE>` é¢„åŠ è½½æ¨¡å—
- [x] `compile` - é¢„ç¼–è¯‘ WebAssembly æ¨¡å— (AOT)
  - [x] è¾“å‡º `.cwasm` é¢„ç¼–è¯‘æ ¼å¼
  - [x] `-o, --output <PATH>` æŒ‡å®šè¾“å‡ºè·¯å¾„
  - [x] `--emit-ir <PATH>` è¾“å‡º IR
- [x] `wast` - è¿è¡Œ WebAssembly æµ‹è¯•è„šæœ¬
  - [x] æ”¯æŒ `.wast` æ ¼å¼æµ‹è¯•æ–‡ä»¶
  - [x] å¯æ›¿ä»£å½“å‰çš„ JSON æµ‹è¯•æ ¼å¼

#### ç°æœ‰å‘½ä»¤ (å·²å®ç°)
- [x] `test` - è¿è¡Œ JSON æ ¼å¼æµ‹è¯• (å½“å‰å®ç°)
- [x] `disasm` - åæ±‡ç¼– WASM æ–‡ä»¶
- [x] `wat` - è§£æ WAT æ–‡ä»¶
- [x] `demo` - è¿è¡Œå†…ç½®ç¤ºä¾‹

#### æ£€æŸ¥ä¸æ¢ç´¢å‘½ä»¤
- [x] `explore` - æ¢ç´¢ WASM ç¼–è¯‘è¿‡ç¨‹
  - [x] æ˜¾ç¤ºç¼–è¯‘å„é˜¶æ®µè¾“å‡º (WASM â†’ IR â†’ VCode â†’ å¯„å­˜å™¨åˆ†é…)
  - [x] è¾“å‡º HTML æŠ¥å‘Š (`--html <PATH>`)
- [x] `objdump` - æ£€æŸ¥é¢„ç¼–è¯‘çš„ `.cwasm` æ–‡ä»¶
  - [x] æ˜¾ç¤ºå…ƒæ•°æ®
  - [x] æ˜¾ç¤ºæ®µä¿¡æ¯

#### é…ç½®ä¸è°ƒè¯•é€‰é¡¹
- [x] `-O, --optimize` ä¼˜åŒ–é€‰é¡¹
  - [x] ä¼˜åŒ–çº§åˆ« (0-3)
  - [x] ç‰¹å®šä¼˜åŒ–å¼€å…³ (`--opt KEY=VALUE`)
- [x] `-D, --debug <KEY=VAL>` è°ƒè¯•é€‰é¡¹
  - [x] è¯¦ç»†æ—¥å¿—è¾“å‡º (`-D verbose`)
  - [x] IR æ‰“å° (`-D print-ir`, `-D print-vcode`, `-D print-regalloc`)
- [x] `-W, --wasm <KEY=VAL>` WASM è¯­ä¹‰é€‰é¡¹
  - [x] å¯ç”¨/ç¦ç”¨ç‰¹å®šææ¡ˆ (`multi-value`, `bulk-memory`, `simd`, `tail-call`)
  - [x] å†…å­˜é™åˆ¶é…ç½® (`max-memory`, `max-table`, `max-call-depth`)

#### WASI æ”¯æŒ (å‚è§ Phase 12)
- [ ] CLI é€‰é¡¹ (`--dir`, `--env`, `-S`) - ä¾èµ– Phase 12 WASI æ ¸å¿ƒå®ç°

#### è¾…åŠ©å‘½ä»¤
- [x] `config` - é…ç½®ç®¡ç†
  - [x] `config show` - æ˜¾ç¤ºé…ç½®
  - [x] `config path` - æ˜¾ç¤ºé…ç½®æ–‡ä»¶è·¯å¾„
  - [x] `config init` - åˆå§‹åŒ–é…ç½®
- [x] `settings` - æ˜¾ç¤ºå¯ç”¨çš„ç¼–è¯‘å™¨è®¾ç½®

#### é”™è¯¯æŠ¥å‘Šæ”¹è¿›
- [x] **å‹å¥½çš„é”™è¯¯ä¿¡æ¯** âœ…
  - [x] WAT è§£æé”™è¯¯æ˜¾ç¤ºè¡Œå·ã€åˆ—å·å’Œç›¸å…³ä»£ç ç‰‡æ®µ (`format_wat_error`)
  - [x] è¿è¡Œæ—¶é”™è¯¯åŒ…å«è°ƒç”¨æ ˆä¿¡æ¯ (`RuntimeErrorContext`)
  - [x] WASM éªŒè¯é”™è¯¯æŒ‡æ˜å…·ä½“ä½ç½® (å‡½æ•°ç´¢å¼•ã€æŒ‡ä»¤åç§») (`ValidationErrorContext`, `validate_module_with_context`)

---

## Phase 6: ä¸­é—´è¡¨ç¤ºå±‚ (IR) âœ… å·²å®Œæˆ

> è¿™æ˜¯å®ç° JIT ç¼–è¯‘å™¨çš„åŸºç¡€ï¼Œå‚è€ƒ [Cranelift](https://cranelift.dev/) çš„è®¾è®¡

### 6.1 é«˜çº§ IR (ç±»ä¼¼ CLIF)
- [x] SSA (Static Single Assignment) å½¢å¼çš„ IR å®šä¹‰
- [x] åŸºæœ¬å— (Basic Block) æ•°æ®ç»“æ„
- [x] æ§åˆ¶æµå›¾ (CFG) æ„å»º
- [x] IR ç±»å‹ç³»ç»Ÿ (ä¸ WASM ç±»å‹å¯¹åº”)
- [x] IR æŒ‡ä»¤é›†å®šä¹‰
  - [x] ç®—æœ¯è¿ç®—æŒ‡ä»¤
  - [x] å†…å­˜è®¿é—®æŒ‡ä»¤
  - [x] æ§åˆ¶æµæŒ‡ä»¤
  - [x] å‡½æ•°è°ƒç”¨æŒ‡ä»¤
- [x] IR Builder API (ç±»ä¼¼ Cranelift FunctionBuilder)
- [x] IR æ–‡æœ¬æ ¼å¼æ‰“å°å™¨

### 6.2 WASM åˆ° IR çš„è½¬æ¢
- [x] WASM æŒ‡ä»¤åˆ° IR æŒ‡ä»¤çš„æ˜ å°„
- [x] æ ˆæœºæ¨¡å‹åˆ°å¯„å­˜å™¨æ¨¡å‹çš„è½¬æ¢
- [x] æ§åˆ¶æµé‡å»º (block/loop/if åˆ° CFG)
- [x] å±€éƒ¨å˜é‡å’Œå‚æ•°å¤„ç†

### 6.3 IR éªŒè¯
- [x] SSA å±æ€§éªŒè¯
- [x] ç±»å‹ä¸€è‡´æ€§æ£€æŸ¥
- [x] æ§åˆ¶æµå®Œæ•´æ€§éªŒè¯

---

## Phase 7: IR ä¼˜åŒ– ğŸ”¨ è¿›è¡Œä¸­

> åœ¨é«˜çº§ IR ä¸Šè¿›è¡Œç›®æ ‡æ— å…³çš„ä¼˜åŒ–

### 7.1 åŸºç¡€ä¼˜åŒ–
- [x] æ­»ä»£ç æ¶ˆé™¤ (Dead Code Elimination)
- [x] å¸¸é‡æŠ˜å  (Constant Folding)
- [x] å¸¸é‡ä¼ æ’­ (Constant Propagation)
- [x] å¤åˆ¶ä¼ æ’­ (Copy Propagation)
- [x] å…¬å…±å­è¡¨è¾¾å¼æ¶ˆé™¤ (CSE)

### 7.2 æ§åˆ¶æµä¼˜åŒ–
- [x] åˆ†æ”¯ç®€åŒ–
- [x] ä¸å¯è¾¾ä»£ç æ¶ˆé™¤
- [x] åŸºæœ¬å—åˆå¹¶
- [x] è·³è½¬çº¿ç¨‹åŒ– (Jump Threading)

### 7.3 å¾ªç¯ä¼˜åŒ–
- [x] å¾ªç¯ä¸å˜ä»£ç å¤–æ (LICM)
- [x] å¾ªç¯å±•å¼€ (Loop Unrolling)
- [x] å¼ºåº¦å‰Šå‡ (Strength Reduction)

### 7.4 é«˜çº§ä¼˜åŒ– (å¯é€‰)
- [ ] E-graph ç»Ÿä¸€ä¼˜åŒ–æ¡†æ¶ (å‚è€ƒ Cranelift çš„åˆ›æ–°è®¾è®¡)
- [ ] å†…è” (Inlining)
- [ ] å°¾è°ƒç”¨ä¼˜åŒ–

---

## Phase 8: ä½çº§ IR ä¸æŒ‡ä»¤é€‰æ‹© ğŸ”¨ è¿›è¡Œä¸­

> ç±»ä¼¼ Cranelift çš„ VCodeï¼Œç›®æ ‡ç›¸å…³çš„ä½çº§è¡¨ç¤º

### 8.1 ä½çº§ IR (VCode) è®¾è®¡ âœ…
- [x] è™šæ‹Ÿå¯„å­˜å™¨è¡¨ç¤º
- [x] ç›®æ ‡ç›¸å…³çš„æŒ‡ä»¤æ ¼å¼
- [x] é SSA å½¢å¼ (å…è®¸é‡å®šä¹‰)
- [x] å¯„å­˜å™¨çº¦æŸè¡¨ç¤º
  - [x] åŸºæœ¬å¯„å­˜å™¨ç±»å‹ (Int/Float)
  - [ ] æ“ä½œæ•°çº¦æŸç³»ç»Ÿ (`OperandKind::Use/Def/UseDef`, `OperandConstraint::Any/Fixed/Reuse` å·²å®šä¹‰ä½†æœªä½¿ç”¨)

### 8.2 æŒ‡ä»¤é€‰æ‹© (Lowering) âœ…
- [x] é«˜çº§ IR åˆ°ä½çº§ IR çš„è½¬æ¢æ¡†æ¶
- [x] æ¨¡å¼åŒ¹é…è§„åˆ™å®šä¹‰ (ç±»ä¼¼ ISLE DSL)
- [x] æŒ‡ä»¤åˆå¹¶ä¸ä¼˜åŒ–
- [x] ç›®æ ‡ç‰¹å®šçš„æŒ‡ä»¤é€‰æ‹©è§„åˆ™

### 8.3 ç›®æ ‡æ¶æ„æŠ½è±¡ âœ…
- [x] ç›®æ ‡æ¶æ„æ¥å£ (TargetISA trait)
- [x] å¯„å­˜å™¨æè¿°
- [x] è°ƒç”¨çº¦å®š (Calling Convention)
  - [x] é»˜è®¤è°ƒç”¨çº¦å®šå®ç°
  - [ ] å¤šè°ƒç”¨çº¦å®šæ”¯æŒ (`SystemV`, `Aapcs64`, `WindowsFastcall`, `Wasm` å·²å®šä¹‰ä½†æœªä½¿ç”¨)
- [x] æŒ‡ä»¤ç¼–ç è§„åˆ™

---

## Phase 9: å¯„å­˜å™¨åˆ†é… âœ… å·²å®Œæˆ

> å°†è™šæ‹Ÿå¯„å­˜å™¨æ˜ å°„åˆ°ç‰©ç†å¯„å­˜å™¨

### 9.1 æ´»è·ƒæ€§åˆ†æ âœ…
- [x] æ´»è·ƒåŒºé—´ (Live Interval) è®¡ç®—
- [x] ä½¿ç”¨-å®šä¹‰é“¾ (Use-Def Chain)

### 9.2 å¯„å­˜å™¨åˆ†é…ç®—æ³• âœ…
- [x] çº¿æ€§æ‰«æåˆ†é…å™¨ (Linear Scan)
- [x] æº¢å‡ºå¤„ç† (Spilling)
- [x] é‡æ–°åŠ è½½ (Reloading)
- [ ] å¯„å­˜å™¨åˆå¹¶ (Coalescing)

### 9.3 æ ˆå¸ƒå±€ âœ…
- [x] æ ˆå¸§å¸ƒå±€è®¡ç®—
- [x] æº¢å‡ºæ§½åˆ†é…
  - [x] åŸºæœ¬æº¢å‡ºæ§½ç±»å‹ (`Spill`, `Arg`)
  - [ ] å®Œæ•´æ ˆæ§½ç±»å‹ (`ReturnAddress` å·²å®šä¹‰ä½†æœªä½¿ç”¨)
- [x] è°ƒç”¨è€…/è¢«è°ƒç”¨è€…ä¿å­˜å¯„å­˜å™¨å¤„ç†
  - [x] åŸºæœ¬åºè¨€/å°¾å£°ç”Ÿæˆ
  - [ ] å®Œæ•´åºè¨€æ“ä½œ (`AdjustSP`, `PushReg`, `PopReg` å·²å®šä¹‰ä½†æœªä½¿ç”¨)

---

## Phase 10: ä»£ç ç”Ÿæˆ ğŸ’»

> ç”Ÿæˆç›®æ ‡å¹³å°çš„æœºå™¨ä»£ç 

### 10.1 x86-64 åç«¯ï¼ˆä½ä¼˜å…ˆï¼‰
- [ ] æŒ‡ä»¤ç¼–ç 
- [ ] å¯»å€æ¨¡å¼
- [ ] æ¡ä»¶ç å¤„ç†
- [ ] æµ®ç‚¹æŒ‡ä»¤ (SSE/AVX)

### 10.2 AArch64 åç«¯ âœ…
- [x] æŒ‡ä»¤ç¼–ç 
  - [x] 64ä½æ•´æ•°è¿ç®— (ADD, SUB, MUL, SDIV, UDIV)
  - [x] 64ä½æµ®ç‚¹è¿ç®— (FADD, FSUB, FMUL, FDIV)
  - [x] 64ä½/32ä½å†…å­˜æ“ä½œ (LDR, STR)
  - [x] 8ä½/16ä½å†…å­˜æ“ä½œ (LDRB, LDRH, LDRSB, LDRSH, STRB, STRH)
- [x] å¯„å­˜å™¨ä½¿ç”¨
- [x] æ¡ä»¶æ‰§è¡Œ
- [x] AArch64 ç‰¹æœ‰æŒ‡ä»¤é€‰æ‹©
  - [x] ä¹˜åŠ /ä¹˜å‡æŒ‡ä»¤ (MADD, MSUB, MNEG)
  - [x] å¸¦ç§»ä½æ“ä½œæ•°æŒ‡ä»¤ (ADD/SUB/AND/OR/XOR shifted)
- [ ] æ‰©å±•æŒ‡ä»¤ (`ExtendKind::Signed8To32/Signed8To64/...` å·²å®šä¹‰ä½†æœªä½¿ç”¨)

### 10.3 ä»£ç å‘å°„ âœ…
- [x] æœºå™¨ç ç¼“å†²åŒº
- [x] é‡å®šä½å¤„ç†
- [x] åˆ†æ”¯åç§»è®¡ç®—
- [x] ä»£ç å¯¹é½

### 10.4 è¿è¡Œæ—¶æ”¯æŒ âœ…
- [x] JIT ä»£ç ç¼“å­˜
- [x] å¯æ‰§è¡Œå†…å­˜ç®¡ç†
- [x] ä»£ç å¸è½½

---

## Phase 11: JIT è¿è¡Œæ—¶é›†æˆ âœ… æ ¸å¿ƒå®Œæˆ

> å°† JIT ç¼–è¯‘å™¨é›†æˆåˆ° WASM è¿è¡Œæ—¶

### 11.1 ç¼–è¯‘ç­–ç•¥ âœ…
- [x] è§£é‡Šæ‰§è¡Œ + JIT æ··åˆæ¨¡å¼
- [x] çƒ­ç‚¹æ£€æµ‹ (Profiling)
- [x] åˆ†å±‚ç¼–è¯‘ (Tiered Compilation)
- [x] æ‡’ç¼–è¯‘ (Lazy Compilation)

### 11.2 è¿è¡Œæ—¶æ¥å£ âœ…
- [x] ç¼–è¯‘å‡½æ•°è°ƒç”¨
- [x] è§£é‡Šå™¨åˆ° JIT ä»£ç çš„åˆ‡æ¢
- [x] å¯æ‰§è¡Œå†…å­˜ç®¡ç† (mmap/mprotect)
- [x] .cwasm é¢„ç¼–è¯‘æ–‡ä»¶æ‰§è¡Œ
- [ ] å †æ ˆæ›¿æ¢ (On-Stack Replacement)

### 11.3 è°ƒè¯•æ”¯æŒ âœ…
- [x] æºç æ˜ å°„
- [x] æ–­ç‚¹æ”¯æŒ
  - [x] æ–­ç‚¹ç®¡ç† API
  - [ ] å®Œæ•´è°ƒè¯•å‘½ä»¤ (`StepInto`, `StepOver`, `StepOut` å·²å®šä¹‰ä½†æœªä½¿ç”¨)
- [x] å †æ ˆè·Ÿè¸ª

---

## Phase 12: WASI æ”¯æŒ ğŸ”¨ è¿›è¡Œä¸­

> WebAssembly System Interface - ä½¿ WASM æ¨¡å—èƒ½å¤Ÿä¸æ“ä½œç³»ç»Ÿäº¤äº’

### 12.1 WASI Preview 1 (wasi_snapshot_preview1)
- [x] æ ‡å‡† I/O æ“ä½œ
  - [x] `fd_read` / `fd_write` - stdin/stdout/stderr è¯»å†™
  - [x] `fd_close` - å…³é—­æ–‡ä»¶æè¿°ç¬¦
  - [x] `fd_prestat_get` / `fd_prestat_dir_name` - é¢„å¼€æ”¾ç›®å½•ä¿¡æ¯
  - [x] `fd_fdstat_get` - è·å–æ–‡ä»¶æè¿°ç¬¦çŠ¶æ€
- [x] æ–‡ä»¶ç³»ç»Ÿæ“ä½œ
  - [x] `fd_seek` / `fd_tell` - æ–‡ä»¶å®šä½
  - [x] `fd_pread` / `fd_pwrite` - ä½ç½®è¯»å†™
  - [x] `path_open` - æ‰“å¼€æ–‡ä»¶
  - [x] `path_create_directory` - åˆ›å»ºç›®å½•
  - [x] `fd_readdir` - ç›®å½•è¯»å–
- [x] ç¯å¢ƒè®¿é—®
  - [x] `environ_get` / `environ_sizes_get` - ç¯å¢ƒå˜é‡
  - [x] `args_get` / `args_sizes_get` - å‘½ä»¤è¡Œå‚æ•°
- [x] æ—¶é’Ÿ
  - [x] `clock_time_get` - è·å–æ—¶é—´
  - [x] `clock_res_get` - æ—¶é’Ÿç²¾åº¦
- [x] éšæœºæ•°
  - [x] `random_get` - éšæœºæ•°ç”Ÿæˆ (PRNG, éå¯†ç å­¦å®‰å…¨)
- [x] è¿›ç¨‹æ§åˆ¶
  - [x] `proc_exit` - é€€å‡ºè¿›ç¨‹
  - [x] `sched_yield` - è®©å‡º CPU

### 12.2 WASI å®‰å…¨æ¨¡å‹
- [x] ç›®å½•é¢„å¼€æ”¾ (Pre-opened directories) - åŸºç¡€å®ç°
- [ ] èƒ½åŠ›æœºåˆ¶ (Capability-based security) - æœªå®ç°
- [ ] æ–‡ä»¶æè¿°ç¬¦æƒé™ç®¡ç† - æœªå®ç°

### 12.3 WASI CLI é›†æˆ
- [x] `--dir <HOST_DIR[::GUEST_DIR]>` ç›®å½•æ˜ å°„
- [x] `--env <NAME=VAL>` ç¯å¢ƒå˜é‡ä¼ é€’
- [x] `-S, --wasi <KEY=VAL>` WASI é€‰é¡¹

---

## Phase 13: WASM æ‰©å±•ææ¡ˆ ğŸŒŸ

### 13.1 WASM 2.0+ ç‰¹æ€§
- [ ] å°¾è°ƒç”¨ (tail-call)
- [ ] å¼‚å¸¸å¤„ç† (exception-handling)
- [ ] åƒåœ¾å›æ”¶ (GC)
- [ ] ç»„ä»¶æ¨¡å‹ (Component Model)

### 13.2 SIMD æ”¯æŒ
- [ ] v128 ç±»å‹
- [ ] SIMD æŒ‡ä»¤é›†
- [ ] å‘é‡åŒ–ä¼˜åŒ–

### 13.3 çº¿ç¨‹æ”¯æŒ
- [ ] å…±äº«å†…å­˜
- [ ] åŸå­æ“ä½œ
- [ ] ç­‰å¾…/é€šçŸ¥

---

## é‡Œç¨‹ç¢‘æ—¶é—´çº¿

| é˜¶æ®µ | ç›®æ ‡ | çŠ¶æ€ |
|------|------|------|
| Phase 1-5 | å®Œæ•´çš„ WASM è§£é‡Šå™¨ | âœ… å·²å®Œæˆ |
| Phase 6 | ä¸­é—´è¡¨ç¤ºå±‚è®¾è®¡ | âœ… å·²å®Œæˆ |
| Phase 7 | IR ä¼˜åŒ– | âœ… å·²å®Œæˆ (7.4 å¯é€‰è·³è¿‡) |
| Phase 8 | æŒ‡ä»¤é€‰æ‹© | âœ… æ ¸å¿ƒå®Œæˆ (çº¦æŸç³»ç»Ÿ/å¤šè°ƒç”¨çº¦å®šå®šä¹‰ä½†æœªä½¿ç”¨) |
| Phase 9 | å¯„å­˜å™¨åˆ†é… | âœ… æ ¸å¿ƒå®Œæˆ (åˆå¹¶ä¼˜åŒ–å¾…å®ç°) |
| Phase 10 | ä»£ç ç”Ÿæˆ | âœ… æ ¸å¿ƒå®Œæˆ (æ‰©å±•æŒ‡ä»¤å¾…å®ç°) |
| Phase 11 | JIT é›†æˆ | âœ… æ ¸å¿ƒå®Œæˆ (OSRã€å®Œæ•´è°ƒè¯•å‘½ä»¤å¾…å®ç°) |
| Phase 12 | WASI æ”¯æŒ | ğŸ“‹ æœªæ¥è®¡åˆ’ |
| Phase 13 | WASM æ‰©å±• | ğŸ“‹ æœªæ¥è®¡åˆ’ |

---

## å‚è€ƒèµ„æº

### WebAssembly è§„èŒƒ
- [WebAssembly Specification](https://webassembly.github.io/spec/)
- [WASM Binary Encoding](https://webassembly.github.io/spec/core/binary/index.html)
- [WASM Semantics](https://webassembly.github.io/spec/core/exec/index.html)

### Cranelift å‚è€ƒ
- [Cranelift Official Site](https://cranelift.dev/)
- [Cranelift Code Generation Primer](https://bouvier.cc/2021/02/17/cranelift-codegen-primer/)
- [ISLE DSL Reference](https://github.com/bytecodealliance/wasmtime/blob/main/cranelift/isle/docs/language-reference.md)
- [Wasmtime and Cranelift Progress](https://bytecodealliance.org/articles/wasmtime-and-cranelift-in-2023)

### ç¼–è¯‘å™¨è®¾è®¡
- [Engineering a Compiler (Cooper & Torczon)](https://www.elsevier.com/books/engineering-a-compiler/cooper/978-0-12-815412-0)
- [SSA Book](http://ssabook.gforge.inria.fr/latest/book.pdf)

---

**å½“å‰çŠ¶æ€**: Phase 8-11 æ ¸å¿ƒåŠŸèƒ½å·²å®Œæˆï¼ŒJIT æ‰§è¡Œå™¨æ”¯æŒ .cwasm é¢„ç¼–è¯‘æ–‡ä»¶çš„ç›´æ¥æ‰§è¡Œã€‚WAST æµ‹è¯•å¥—ä»¶é€šè¿‡ç‡è¾¾åˆ° **96.5%** (15952/16538)ã€‚
**ä¸‹ä¸€æ­¥**: ä¿®å¤å‰©ä½™ 586 ä¸ªæµ‹è¯•å¤±è´¥ (ä¸»è¦æ˜¯ Unicode åç§°ã€å¯¼å…¥ç±»å‹éªŒè¯ã€æµ®ç‚¹è§£æç²¾åº¦)

---

## å‰©ä½™ä»»åŠ¡ä¼˜å…ˆçº§

> æ ¹æ®å®ç”¨æ€§ã€ä¾èµ–å…³ç³»å’Œå¤æ‚åº¦æ’åº

### ğŸ”´ é«˜ä¼˜å…ˆçº§ (P0) - å®ç”¨æ€§é«˜ã€ç”¨æˆ·å¯è§

| ä»»åŠ¡ | æ‰€å±é˜¶æ®µ | ç†ç”± |
|------|----------|------|
| **WASI Preview 1 æ ¸å¿ƒæ¥å£** | Phase 12 | æ—  WASI æ”¯æŒåˆ™æ— æ³•è¿è¡Œå¤§å¤šæ•°ç°å®ä¸–ç•Œ WASM ç¨‹åº |
| - `fd_read`/`fd_write` (æ ‡å‡†è¾“å…¥è¾“å‡º) | 12.1 | æœ€åŸºç¡€çš„ I/Oï¼Œå‡ ä¹æ‰€æœ‰ç¨‹åºéƒ½éœ€è¦ |
| - `args_get`/`environ_get` | 12.1 | å‘½ä»¤è¡Œç¨‹åºå¿…éœ€ |
| - `proc_exit` | 12.1 | ç¨‹åºé€€å‡ºå¿…éœ€ |
| - `clock_time_get` | 12.1 | è®¡æ—¶ã€æ€§èƒ½æµ‹é‡å¿…éœ€ |

### ğŸŸ  ä¸­ä¼˜å…ˆçº§ (P1) - åŠŸèƒ½å®Œæ•´æ€§

| ä»»åŠ¡ | æ‰€å±é˜¶æ®µ | ç†ç”± |
|------|----------|------|
| ~~**å‹å¥½çš„é”™è¯¯ä¿¡æ¯**~~ | ~~Phase 5~~ | âœ… å·²å®Œæˆ |
| ~~**WASM éªŒè¯é”™è¯¯ä½ç½®**~~ | ~~Phase 5~~ | âœ… å·²å®Œæˆ |
| ~~**WASI æ–‡ä»¶ç³»ç»Ÿ**~~ | ~~Phase 12~~ | âœ… å·²å®Œæˆ |
| ~~- `path_open`/`fd_close`~~ | ~~12.1~~ | âœ… å·²å®Œæˆ |
| ~~- `fd_seek`/`fd_tell`~~ | ~~12.1~~ | âœ… å·²å®Œæˆ |
| ~~- `fd_fdstat_get`~~ | ~~12.1~~ | âœ… å·²å®Œæˆ |
| ~~- `path_create_directory`/`fd_readdir`~~ | ~~12.1~~ | âœ… å·²å®Œæˆ |
| ~~- `clock_res_get`/`sched_yield`~~ | ~~12.1~~ | âœ… å·²å®Œæˆ |
| ~~**8/16ä½å†…å­˜æ“ä½œ**~~ | ~~Phase 10~~ | âœ… å·²å®Œæˆ |
| **æ‰©å±•æŒ‡ä»¤ (ExtendKind)** | Phase 10 | ç±»å‹è½¬æ¢å®Œæ•´æ€§ |
| **å¯„å­˜å™¨åˆå¹¶ (Coalescing)** | Phase 9 | æå‡ JIT ä»£ç è´¨é‡ |

### ğŸŸ¡ ä½ä¼˜å…ˆçº§ (P2) - é”¦ä¸Šæ·»èŠ±

| ä»»åŠ¡ | æ‰€å±é˜¶æ®µ | ç†ç”± |
|------|----------|------|
| **å †æ ˆæ›¿æ¢ (OSR)** | Phase 11 | ä¼˜åŒ–çƒ­ç‚¹ä»£ç ï¼Œéå¿…éœ€ |
| **å®Œæ•´è°ƒè¯•å‘½ä»¤** (`StepInto/Over/Out`) | Phase 11 | è°ƒè¯•åŠŸèƒ½ï¼Œå¯åè¡¥ |
| **E-graph ä¼˜åŒ–æ¡†æ¶** | Phase 7 | é«˜çº§ä¼˜åŒ–ï¼Œç°æœ‰ä¼˜åŒ–å·²å¤Ÿç”¨ |
| **å†…è” (Inlining)** | Phase 7 | æ€§èƒ½ä¼˜åŒ– |
| **å°¾è°ƒç”¨ä¼˜åŒ–** | Phase 7 | ç‰¹å®šåœºæ™¯ä¼˜åŒ– |
| **å¤šè°ƒç”¨çº¦å®š** | Phase 8 | ç›®å‰å•ä¸€ç›®æ ‡æ— éœ€ |
| **æ“ä½œæ•°çº¦æŸç³»ç»Ÿ** | Phase 8 | å¯„å­˜å™¨åˆ†é…å·²å·¥ä½œ |
| **å®Œæ•´æ ˆæ§½ç±»å‹** | Phase 9 | å½“å‰å®ç°å·²æ»¡è¶³éœ€æ±‚ |

### ğŸ”µ è¿œæœŸç›®æ ‡ (P3) - å‰æ²¿ç‰¹æ€§

| ä»»åŠ¡ | æ‰€å±é˜¶æ®µ | ç†ç”± |
|------|----------|------|
| **x86-64 åç«¯** | Phase 10 | éœ€è¦å¤§é‡å·¥ä½œï¼ŒAArch64 ä¼˜å…ˆ |
| **å°¾è°ƒç”¨ææ¡ˆ** | Phase 13 | WASM 2.0+ ç‰¹æ€§ |
| **å¼‚å¸¸å¤„ç†** | Phase 13 | WASM 2.0+ ç‰¹æ€§ |
| **GC ææ¡ˆ** | Phase 13 | å¤æ‚åº¦é«˜ |
| **SIMD æ”¯æŒ** | Phase 13 | éœ€è¦å¤§é‡æŒ‡ä»¤å®ç° |
| **çº¿ç¨‹æ”¯æŒ** | Phase 13 | æ¶‰åŠå¹¶å‘æ¨¡å‹ |
| **ç»„ä»¶æ¨¡å‹** | Phase 13 | è§„èŒƒä»åœ¨æ¼”è¿› |

### æ¨èå®æ–½è·¯å¾„

```
Phase 12 WASI (P0) âœ… å·²å®Œæˆ
    â”‚
    â”œâ”€â–º fd_write/fd_read (stdout/stderr/stdin) âœ…
    â”œâ”€â–º args_get/environ_get âœ…
    â”œâ”€â–º proc_exit âœ…
    â””â”€â–º clock_time_get âœ…
         â”‚
         â–¼
Phase 12 WASI æ–‡ä»¶ç³»ç»Ÿ (P1) âœ… å·²å®Œæˆ
    â”‚
    â”œâ”€â–º path_open/fd_close âœ…
    â”œâ”€â–º fd_seek/fd_tell âœ…
    â”œâ”€â–º fd_fdstat_get âœ…
    â”œâ”€â–º path_create_directory/fd_readdir âœ…
    â””â”€â–º clock_res_get/sched_yield âœ…
         â”‚
         â–¼
Phase 10 å®Œå–„ (P1)
    â”‚
    â””â”€â–º ExtendKind æŒ‡ä»¤
         â”‚
         â–¼
Phase 9/11 ä¼˜åŒ– (P2)
    â”‚
    â”œâ”€â–º å¯„å­˜å™¨åˆå¹¶
    â””â”€â–º OSR (å¯é€‰)
```

---

## Phase 14: WAST å®˜æ–¹æµ‹è¯•å¥—ä»¶å…¼å®¹æ€§ ğŸ”¨ è¿›è¡Œä¸­

> åŸºäº WebAssembly å®˜æ–¹æµ‹è¯•å¥—ä»¶ (72 ä¸ª .wast æ–‡ä»¶) çš„å…¼å®¹æ€§åˆ†æ

### 14.1 æµ‹è¯•ç°çŠ¶æ€»ç»“ (2025-12 æ›´æ–°)

| çŠ¶æ€ | æ•°é‡ | è¯´æ˜ |
|------|------|------|
| âœ… å®Œå…¨é€šè¿‡ | 52 | 0 failures |
| âš ï¸ éƒ¨åˆ†é€šè¿‡ | 16 | æœ‰å°‘é‡ failures |
| âŒ å¤§é‡å¤±è´¥ | 4 | éœ€è¦é‡ç‚¹ä¿®å¤ |

**æµ‹è¯•é€šè¿‡ç‡**: 15952 passed / 16538 total = **96.5%**

**å®Œå…¨é€šè¿‡çš„æµ‹è¯• (52ä¸ª)**:
- æ•°å€¼è¿ç®—: `f32.wast`, `f64.wast`, `f32_cmp.wast`, `f64_cmp.wast`, `f32_bitwise.wast`, `f64_bitwise.wast`, `i32.wast`, `i64.wast`, `int_exprs.wast`, `int_literals.wast`, `fac.wast`
- å†…å­˜æ“ä½œ: `memory.wast`, `memory_copy.wast`, `memory_fill.wast`, `memory_grow.wast`, `memory_init.wast`, `memory_redundancy.wast`, `memory_size.wast`, `memory_trap.wast`, `address.wast`, `align.wast`, `load.wast`, `store.wast`, `endianness.wast`, `float_misc.wast`
- æ§åˆ¶æµ: `block.wast`, `loop.wast`, `br.wast`, `nop.wast`, `return.wast`, `labels.wast`, `forward.wast`, `switch.wast`, `unreachable.wast`, `traps.wast`
- å˜é‡ä¸å‡½æ•°: `local_get.wast`, `local_set.wast`, `global.wast`, `call.wast`, `func.wast`, `select.wast`, `stack.wast`
- è¡¨ä¸å…ƒç´ : `elem.wast`, `table.wast`, `table_copy.wast`, `table_fill.wast`, `table_init.wast`, `table_get.wast`, `table_set.wast`
- å…¶ä»–: `token.wast`, `type.wast`, `exports.wast`, `start.wast`, `left-to-right.wast`

### 14.2 WAT/WAST è§£æå™¨ç¼ºå¤±åŠŸèƒ½

#### 14.2.1 æ•°å€¼è§£æé—®é¢˜ (P0 - é«˜ä¼˜å…ˆçº§)
- [ ] **æ— ç¬¦å· 32 ä½æ•´æ•°å­—é¢é‡**: `4294967295` (å½±å“ address, const, int_literals)
- [ ] **æ— ç¬¦å· 64 ä½æ•´æ•°å­—é¢é‡**: `FFFF_FFFF_FFFF_FFFF` (å½±å“ align)
- [ ] **NaN å­—é¢é‡è¯­æ³•**: `nan`, `nan:0x...` (å½±å“ float_literals, local_tee)

#### 14.2.2 WAT è¯­æ³•ç¼ºå¤± (P0 - é«˜ä¼˜å…ˆçº§)
- [ ] **elem æ®µ funcref è¯­æ³•**: `(elem (table ...) funcref ...)` (å½±å“ elem)
- [ ] **å†…è” export è¯­æ³•**: `(export "name" (func ...))` åœ¨ func å†…éƒ¨ (å½±å“ exports)
- [ ] **global åˆå§‹åŒ–è¡¨è¾¾å¼æ‰©å±•**: å¤æ‚çš„ global åˆå§‹åŒ– (å½±å“ global)
- [ ] **memory/table å†…è”å®šä¹‰**: `(memory ...)` / `(table ...)` ç®€å†™å½¢å¼ (å½±å“ memory, table)
- [ ] **å‰å‘ç±»å‹å¼•ç”¨**: `(type $forward ...)` åœ¨å®šä¹‰å‰ä½¿ç”¨ (å½±å“ func)
- [ ] **select æŒ‡ä»¤ ref type**: `(select (result ...))` å¸¦ç»“æœç±»å‹ (å½±å“ select)
- [ ] **local ç®€å†™è¯­æ³•**: æ•°å­—ç´¢å¼•å½¢å¼ (å½±å“ local)
- [ ] **br_table æ‰©å±•è¯­æ³•**: å¸¦æ ‡ç­¾æ•°ç»„çš„å®Œæ•´è¯­æ³• (å½±å“ br_table)

#### 14.2.3 æŒ‡ä»¤è§£æé—®é¢˜ (P1 - ä¸­ä¼˜å…ˆçº§)
- [ ] **call_indirect æ–°è¯­æ³•**: `(call_indirect (type ...) ...)` vs æ—§ offset è¯­æ³• (å½±å“ call_indirect, table_get, table_set)
- [ ] **start æ®µè¯­æ³•**: ä¸åŒå½¢å¼çš„ start å®šä¹‰ (å½±å“ start)
- [ ] **memory.grow è¯­æ³•**: å¸¦å‚æ•°çš„å½¢å¼ (å½±å“ memory_grow)
- [ ] **float è¡¨è¾¾å¼è¯­æ³•**: `(f32.const (f32.neg ...))` åµŒå¥—å½¢å¼ (å½±å“ float_exprs, float_memory)
- [ ] **stack æµ‹è¯• id è¯­æ³•**: `$body` ç­‰ç‰¹æ®Šæ ‡è¯†ç¬¦ (å½±å“ stack)

#### 14.2.4 WASM 2.0+ æŒ‡ä»¤ (P2 - ä½ä¼˜å…ˆçº§)
- [ ] **ref.as_non_null**: typed reference æŒ‡ä»¤ (å½±å“ unreached-invalid)
- [ ] **call_ref**: å‡½æ•°å¼•ç”¨è°ƒç”¨ (å½±å“ unreached-valid)

### 14.3 äºŒè¿›åˆ¶è§£æå™¨é—®é¢˜

- [ ] **Section size éªŒè¯**: å£°æ˜å¤§å°ä¸å®é™…å†…å®¹ä¸åŒ¹é… (å½±å“ binary-leb128)
- [ ] **æ„å¤–è¾“å…¥ç»“æŸå¤„ç†**: æˆªæ–­çš„äºŒè¿›åˆ¶æ¨¡å— (å½±å“ binary)

### 14.4 è¿è¡Œæ—¶åŠŸèƒ½ç¼ºå¤±

#### 14.4.1 æµ®ç‚¹ä½è¿ç®— (P1) âœ… å·²ä¿®å¤
- [x] **f32.copysign / f64.copysign** - å·²å®ç° (f32_bitwise, f64_bitwise å…¨éƒ¨é€šè¿‡)
- [x] **-nan è§£æ** - å·²ä¿®å¤è´Ÿ NaN çš„ç¬¦å·ä½ä¿ç•™

#### 14.4.2 åç§°å¤„ç† (P2)
- [ ] **Unicode åç§°æ”¯æŒ** (å½±å“ names - 370 failures)

#### 14.4.3 é“¾æ¥éªŒè¯ (P1)
- [ ] **å¯¼å…¥ç±»å‹å…¼å®¹æ€§éªŒè¯** (å½±å“ linking - 84 failures)
- [ ] **assert_unlinkable è¯­ä¹‰**

#### 14.4.4 ç±»å‹è½¬æ¢ (P1) âœ… éƒ¨åˆ†ä¿®å¤
- [x] **i64.extend_i32_u** - å·²ä¿®å¤æ— ç¬¦å·æ‰©å±•
- [x] **trunc æŒ‡ä»¤æº¢å‡ºæ£€æµ‹** - å·²æ·»åŠ  NaN å’Œæº¢å‡ºæ£€æŸ¥
- [ ] **trunc è¾¹ç•Œå€¼ç²¾åº¦** (å½±å“ conversions - 26 failures)

#### 14.4.5 å…¶ä»–è¿è¡Œæ—¶é—®é¢˜
- [ ] **data æ®µåˆå§‹åŒ–è¾¹ç•Œæ£€æŸ¥** (å½±å“ data - 14 failures)
- [ ] **custom section å¤„ç†** (å½±å“ custom - 7 failures)
- [ ] **func_ptrs è¡¨æ“ä½œ** (å½±å“ func_ptrs - 9 failures)
- [ ] **table_size è¾¹ç•Œ** (å½±å“ table_size - 16 failures)

### 14.5 å®æ–½ä¼˜å…ˆçº§

```
å·²å®Œæˆ âœ…
â”œâ”€â–º f32.copysign / f64.copysign å®ç°
â”œâ”€â–º -nan è§£æä¿®å¤
â”œâ”€â–º i64.extend_i32_u ä¿®å¤
â”œâ”€â–º trunc æŒ‡ä»¤æº¢å‡º/NaN æ£€æµ‹
â””â”€â–º call_indirect è¡¨å…ƒç´ åˆå§‹åŒ–ä¿®å¤

å‰©ä½™é«˜ä¼˜å…ˆçº§ (P0)
â”œâ”€â–º å¯¼å…¥ç±»å‹å…¼å®¹æ€§éªŒè¯ (linking - 63 failures)
â”œâ”€â–º const æµ®ç‚¹è§£æç²¾åº¦ (const - 32 failures)
â””â”€â–º conversions è¾¹ç•Œå€¼ (conversions - 26 failures)

ä¸­ä¼˜å…ˆçº§ (P1)
â”œâ”€â–º éªŒè¯å™¨ type mismatch æ£€æµ‹ (if, unreached-invalid)
â”œâ”€â–º data æ®µè¾¹ç•Œæ£€æŸ¥ (data - 14 failures)
â”œâ”€â–º float_literals è§£æ (float_literals - 12 failures)
â””â”€â–º func_ptrs è¡¨æ“ä½œ (func_ptrs - 9 failures)

ä½ä¼˜å…ˆçº§ (P2)
â”œâ”€â–º Unicode åç§°æ”¯æŒ (names - 370 failures)
â”œâ”€â–º custom section å®Œæ•´æ”¯æŒ (custom - 7 failures)
â””â”€â–º comments è§£æ (comments - 3 failures)
```

### 14.6 æµ‹è¯•é€šè¿‡ç‡ç›®æ ‡

| é˜¶æ®µ | ç›®æ ‡ | å½“å‰ |
|------|------|------|
| âœ… è§£æé€šè¿‡ | è§£æé€šè¿‡ç‡ > 90% | 100% (72/72) |
| âœ… åŸºç¡€æ‰§è¡Œ | æ‰§è¡Œé€šè¿‡ç‡ > 80% | **96.5%** (15952/16538) |
| ğŸ”¨ å½“å‰ç›®æ ‡ | æ‰§è¡Œé€šè¿‡ç‡ > 98% | 96.5% |
| æœ€ç»ˆç›®æ ‡ | æ‰§è¡Œé€šè¿‡ç‡ 100% | - |

---

## Phase 15: å®˜æ–¹æµ‹è¯•å¥—ä»¶å…¨é‡é€šè¿‡ ğŸ¯

> ç›®æ ‡: é€šè¿‡ `testsuite/data/` ç›®å½•ä¸‹æ‰€æœ‰ 72 ä¸ª .wast æµ‹è¯•æ–‡ä»¶

### 15.1 ç›®æ ‡

- [ ] æ‰€æœ‰ 72 ä¸ª .wast æ–‡ä»¶æ‰§è¡Œé€šè¿‡ (0 failures)
- [ ] å»ºç«‹æŒç»­é›†æˆæµ‹è¯•ï¼Œç¡®ä¿ä¸é€€åŒ–

### 15.2 å½“å‰çŠ¶æ€ (2025-12 æ›´æ–°)

**æ€»ä½“è¿›åº¦**: 15952 passed / 16538 total = **96.5%** é€šè¿‡ç‡

**å®Œå…¨é€šè¿‡çš„æµ‹è¯• (52ä¸ª)**: è§ Phase 14.1

**æœ‰å°‘é‡å¤±è´¥çš„æµ‹è¯• (16ä¸ª)**:
| æµ‹è¯•æ–‡ä»¶ | é€šè¿‡ | å¤±è´¥ | ä¸»è¦é—®é¢˜ |
|----------|------|------|----------|
| `names.wast` | 112 | 370 | Unicode åç§°å¤„ç† |
| `linking.wast` | 70 | 63 | å¯¼å…¥ç±»å‹éªŒè¯ |
| `const.wast` | 344 | 32 | æµ®ç‚¹è§£æç²¾åº¦ |
| `conversions.wast` | 592 | 26 | trunc è¾¹ç•Œå€¼ |
| `unreached-invalid.wast` | 103 | 18 | éªŒè¯å™¨ type mismatch |
| `table_size.wast` | 22 | 16 | è¡¨å¤§å°è¾¹ç•Œ |
| `data.wast` | 20 | 14 | æ•°æ®æ®µè¾¹ç•Œ |
| `float_literals.wast` | 165 | 12 | æµ®ç‚¹å­—é¢é‡ |
| `func_ptrs.wast` | 23 | 9 | å‡½æ•°æŒ‡é’ˆ |
| `custom.wast` | 1 | 7 | è‡ªå®šä¹‰æ®µ |
| `unwind.wast` | 43 | 6 | æ ˆå±•å¼€ |
| `if.wast` | 236 | 4 | éªŒè¯å™¨ type mismatch |
| `table_grow.wast` | 44 | 4 | è¡¨å¢é•¿ |
| `comments.wast` | 0 | 3 | æ³¨é‡Šè§£æ |
| `br_if.wast` | 117 | 1 | åˆ†æ”¯æ¡ä»¶ |
| `local_tee.wast` | 96 | 1 | å±€éƒ¨å˜é‡ |

### 15.3 å‰©ä½™ä»»åŠ¡

#### é«˜å½±å“ (è§£å†³åå¯å¤§å¹…æå‡é€šè¿‡ç‡)
- [ ] **Unicode åç§°æ”¯æŒ** - ä¿®å¤åå¯æ¶ˆé™¤ ~370 failures
- [ ] **å¯¼å…¥ç±»å‹å…¼å®¹æ€§éªŒè¯** - ä¿®å¤åå¯æ¶ˆé™¤ ~63 failures
- [ ] **æµ®ç‚¹è§£æç²¾åº¦** - ä¿®å¤åå¯æ¶ˆé™¤ ~32 failures

#### ä¸­ç­‰å½±å“
- [ ] **trunc è¾¹ç•Œå€¼ç²¾åº¦** - ~26 failures
- [ ] **éªŒè¯å™¨ type mismatch æ£€æµ‹** - ~22 failures
- [ ] **è¡¨å¤§å°è¾¹ç•Œ** - ~16 failures

#### ä½å½±å“
- [ ] **æ•°æ®æ®µè¾¹ç•Œæ£€æŸ¥** - ~14 failures
- [ ] **æµ®ç‚¹å­—é¢é‡** - ~12 failures
- [ ] **å…¶ä»–** - ~32 failures

### 15.4 è¿›åº¦è·Ÿè¸ª

| ç±»åˆ« | å®Œå…¨é€šè¿‡ | éƒ¨åˆ†é€šè¿‡ | é€šè¿‡ç‡ |
|------|----------|----------|--------|
| æ•°å€¼è¿ç®— | 11 | 3 | 93% |
| å†…å­˜æ“ä½œ | 14 | 0 | 100% |
| æ§åˆ¶æµ | 10 | 3 | 77% |
| è¡¨/å…ƒç´  | 7 | 2 | 78% |
| å¯¼å…¥å¯¼å‡º/é“¾æ¥ | 2 | 1 | 67% |
| å…¶ä»– | 8 | 7 | 53% |
| **æ€»è®¡** | **52** | **16** | **96.5%** |
