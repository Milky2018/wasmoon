# Wasmoon Roadmap

WebAssembly Runtime in MoonBit - å¼€å‘è·¯çº¿å›¾

## é¡¹ç›®æ¦‚è¿°

Wasmoon æ˜¯ä¸€ä¸ªç”¨ MoonBit ç¼–å†™çš„ WebAssembly è¿è¡Œæ—¶ï¼Œç›®æ ‡æ˜¯å®ç°ä¸€ä¸ªå®Œæ•´çš„ WASM è§£é‡Šå™¨ï¼Œæ”¯æŒ WebAssembly 1.0 è§„èŒƒçš„æ ¸å¿ƒç‰¹æ€§ã€‚

## Phase 1: MVP âœ… å·²å®Œæˆ

### 1.1 æ ¸å¿ƒæ•°æ®ç»“æ„ âœ…
- [x] å€¼ç±»å‹å®šä¹‰ (I32, I64, F32, F64, FuncRef, ExternRef)
- [x] æŒ‡ä»¤é›†æšä¸¾ (190+ æŒ‡ä»¤å˜ä½“)
- [x] æ¨¡å—ç»“æ„ (Module, FuncType, Export, Import ç­‰)

### 1.2 äºŒè¿›åˆ¶æ ¼å¼è§£æå™¨ âœ…
- [x] é­”æ•°å’Œç‰ˆæœ¬éªŒè¯
- [x] LEB128 ç¼–ç è§£ç 
- [x] 11 ç§ Section è§£æ
- [x] IEEE 754 æµ®ç‚¹æ•°è§£ç  (f32/f64)

### 1.3 è¿è¡Œæ—¶æ•°æ®ç»“æ„ âœ…
- [x] æ“ä½œæ•°æ ˆ (Stack)
- [x] çº¿æ€§å†…å­˜ (Memory)
- [x] å‡½æ•°å¼•ç”¨è¡¨ (Table)
- [x] å…¨å±€å˜é‡ (GlobalInstance)
- [x] è°ƒç”¨å¸§ (Frame)
- [x] å…¨å±€å­˜å‚¨ (Store)
- [x] æ¨¡å—å®ä¾‹ (ModuleInstance)

### 1.4 åŸºç¡€æ‰§è¡Œå¼•æ“ âœ…
- [x] i32 ç®—æœ¯/æ¯”è¾ƒ/ä½è¿ç®—
- [x] å¸¸é‡æŒ‡ä»¤
- [x] å±€éƒ¨å˜é‡æ“ä½œ
- [x] åŸºæœ¬æ§åˆ¶æµ

---

## Phase 2: æ ¸å¿ƒåŠŸèƒ½æ‰©å±• âœ… å·²å®Œæˆ

### 2.1 å®Œæ•´çš„æ•°å€¼è¿ç®— âœ…
- [x] i64 ç®—æœ¯/æ¯”è¾ƒ/ä½è¿ç®—
- [x] f32/f64 æµ®ç‚¹è¿ç®—
- [x] æ•°å€¼è½¬æ¢æŒ‡ä»¤ (wrap, extend, trunc, convert, reinterpret)
- [x] é¥±å’Œè½¬æ¢æŒ‡ä»¤ (trunc_sat)

### 2.2 å†…å­˜æ“ä½œ âœ…
- [x] å®Œæ•´çš„ load/store æŒ‡ä»¤æ—
- [x] æ‰©å±•çš„ load æŒ‡ä»¤ (load8_s, load8_u, load16_s, load16_u, load32_s, load32_u)
- [x] memory.size å’Œ memory.grow

### 2.3 æ§åˆ¶æµ âœ…
- [x] ç»“æ„åŒ–æ§åˆ¶æµ (block, loop, if-else)
- [x] åˆ†æ”¯æŒ‡ä»¤ (br, br_if, br_table)
- [x] select æŒ‡ä»¤

### 2.4 å‡½æ•°è°ƒç”¨ âœ…
- [x] ç›´æ¥å‡½æ•°è°ƒç”¨ (call)
- [x] é—´æ¥å‡½æ•°è°ƒç”¨ (call_indirect)

---

## Phase 3: æ¨¡å—ç³»ç»Ÿ ğŸ“¦

### 3.1 å¯¼å…¥å¯¼å‡º
- [ ] å‡½æ•°å¯¼å…¥/å¯¼å‡º
- [ ] å†…å­˜å¯¼å…¥/å¯¼å‡º
- [ ] è¡¨å¯¼å…¥/å¯¼å‡º
- [ ] å…¨å±€å˜é‡å¯¼å…¥/å¯¼å‡º
- [ ] ä¸»æœºå‡½æ•°æ¥å£ (Host Functions)

### 3.2 æ¨¡å—éªŒè¯å™¨
- [ ] ç±»å‹æ£€æŸ¥
- [ ] æ ˆé«˜åº¦éªŒè¯
- [ ] æ§åˆ¶æµéªŒè¯

### 3.3 æ¨¡å—é“¾æ¥
- [ ] å¤šæ¨¡å—æ”¯æŒ
- [ ] ç¬¦å·è§£æ

---

## Phase 4: é«˜çº§ç‰¹æ€§ ğŸš€

### 4.1 å…¨å±€å˜é‡
- [ ] global.get / global.set
- [ ] å…¨å±€å˜é‡åˆå§‹åŒ–è¡¨è¾¾å¼

### 4.2 è¡¨æ“ä½œ
- [ ] table.get / table.set
- [ ] table.size / table.grow
- [ ] table.fill / table.copy

### 4.3 æ•°æ®æ®µ
- [ ] æ•°æ®æ®µåˆå§‹åŒ–
- [ ] memory.init / memory.copy / memory.fill

### 4.4 å¼•ç”¨ç±»å‹
- [ ] ref.null / ref.is_null / ref.func

---

## Phase 5: æ€§èƒ½ä¼˜åŒ– âš¡

### 5.1 è§£é‡Šå™¨ä¼˜åŒ–
- [ ] ç›´æ¥çº¿ç¨‹è§£é‡Š (Direct Threading)
- [ ] æŒ‡ä»¤èåˆ (Instruction Fusion)
- [ ] è¶…çº§æŒ‡ä»¤ (Superinstructions)
- [ ] æ ˆç¼“å­˜ä¼˜åŒ–

### 5.2 å·¥å…·é“¾
- [ ] WAT æ–‡æœ¬æ ¼å¼æ”¯æŒ
- [ ] WASM åæ±‡ç¼–å™¨
- [ ] åŸºå‡†æµ‹è¯•å¥—ä»¶

---

## Phase 6: è§„èŒƒå…¼å®¹æ€§ ğŸ“‹

### 6.1 WASM 1.0
- [ ] é€šè¿‡å®˜æ–¹æµ‹è¯•å¥—ä»¶

### 6.2 WASM 2.0 ç‰¹æ€§
- [ ] å¤šå€¼è¿”å›
- [ ] æ‰¹é‡å†…å­˜æ“ä½œ
- [ ] å°¾è°ƒç”¨

### 6.3 æ‰©å±•ææ¡ˆï¼ˆå¯é€‰ï¼‰
- [ ] SIMD (v128)
- [ ] å¼‚å¸¸å¤„ç†

---

## å‚è€ƒèµ„æº

- [WebAssembly Specification](https://webassembly.github.io/spec/)
- [WASM Binary Encoding](https://webassembly.github.io/spec/core/binary/index.html)
- [WASM Semantics](https://webassembly.github.io/spec/core/exec/index.html)

---

**å½“å‰çŠ¶æ€**: Phase 2 å·²å®Œæˆ (å‡½æ•°è°ƒç”¨)
**ä¸‹ä¸€æ­¥**: Phase 3.1 (å¯¼å…¥å¯¼å‡º)
